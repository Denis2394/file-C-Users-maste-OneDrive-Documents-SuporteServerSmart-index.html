const modelosSamsung = {
  'A01': 'R$70,00',
  'A02': 'R$70,00',
  'A03': 'R$75,00',
  'A04': 'R$75,00',
  'A05': 'R$80,00',
  'A10': 'R$60,00',
  'A11': 'R$65,00',
  'A12': 'R$75,00',
  'A13': 'R$80,00',
  'A14': 'R$85,00',
  'A15': 'R$90,00',
  'A20': 'R$70,00',
  'A21': 'R$75,00',
  'A22': 'R$80,00',
  'A23': 'R$85,00',
  'A24': 'R$90,00',
  'A30': 'R$75,00',
  'A31': 'R$80,00',
  'A32': 'R$85,00',
  'A33': 'R$90,00',
  'A34': 'R$95,00',
  'A50': 'R$80,00',
  'A51': 'R$85,00',
  'A52': 'R$90,00',
  'A53': 'R$95,00',
  'A54': 'R$100,00',
  'A70': 'R$85,00',
  'A71': 'R$90,00',
  'A72': 'R$95,00',
  'A73': 'R$100,00',
  'A80': 'R$90,00',
  'A81': 'R$95,00',
  'A82': 'R$100,00',
  'M10': 'R$65,00',
  'M11': 'R$70,00',
  'M12': 'R$75,00',
  'M13': 'R$80,00',
  'M14': 'R$85,00',
  'M20': 'R$70,00',
  'M21': 'R$75,00',
  'M22': 'R$80,00',
  'M23': 'R$85,00',
  'M30': 'R$75,00',
  'M31': 'R$80,00',
  'M32': 'R$85,00',
  'M33': 'R$90,00',
  'M40': 'R$80,00',
  'M42': 'R$85,00',
  'M52': 'R$90,00',
  'M53': 'R$95,00',
  'M54': 'R$100,00',
  'S10': 'R$120,00',
  'S10e': 'R$110,00',
  'S10+': 'R$130,00',
  'S20': 'R$130,00',
  'S20+': 'R$140,00',
  'S20 Ultra': 'R$150,00',
  'S21': 'R$140,00',
  'S21+': 'R$150,00',
  'S21 Ultra': 'R$160,00',
  'S22': 'R$150,00',
  'S22+': 'R$160,00',
  'S22 Ultra': 'R$170,00',
  'S23': 'R$160,00',
  'S23+': 'R$170,00',
  'S23 Ultra': 'R$180,00',
  'S24': 'R$170,00',
  'S24+': 'R$180,00',
  'S24 Ultra': 'R$190,00',
  'Note 10': 'R$130,00',
  'Note 10+': 'R$140,00',
  'Note 20': 'R$140,00',
  'Note 20 Ultra': 'R$150,00',
  'Z Flip': 'R$160,00',
  'Z Flip 3': 'R$170,00',
  'Z Flip 4': 'R$180,00',
  'Z Flip 5': 'R$190,00',
  'Z Fold': 'R$180,00',
  'Z Fold 2': 'R$190,00',
  'Z Fold 3': 'R$200,00',
  'Z Fold 4': 'R$210,00',
  'Z Fold 5': 'R$220,00',
  'J1': 'R$50,00',
  'J2': 'R$55,00',
  'J3': 'R$60,00',
  'J4': 'R$65,00',
  'J5': 'R$70,00',
  'J6': 'R$75,00',
  'J7': 'R$80,00',
  'J8': 'R$85,00',
  'J10': 'R$90,00',
  'J20': 'R$95,00',
  'J30': 'R$100,00',
  'J40': 'R$105,00',
  'J50': 'R$110,00',
  'J60': 'R$115,00',
  'J70': 'R$120,00',
  'J80': 'R$125,00',
  'J90': 'R$130,00',
  'J100': 'R$135,00',
  'J110': 'R$140,00',
  'J120': 'R$145,00',
  'J130': 'R$150,00',
  'J140': 'R$155,00',
  'J150': 'R$160,00',
  'J160': 'R$165,00',
  'J170': 'R$170,00',
  'J180': 'R$175,00',
  'J190': 'R$180,00',
  'J200': 'R$185,00',
  'J210': 'R$190,00',
  'J220': 'R$195,00',
  'J230': 'R$200,00',
  'J240': 'R$205,00',
  'J250': 'R$210,00',
  'J260': 'R$215,00',
  'J270': 'R$220,00',
  'J280': 'R$225,00',
  'J290': 'R$230,00',
  'J300': 'R$235,00',
  'J310': 'R$240,00',
  'J320': 'R$245,00',
  'J330': 'R$250,00',
  'J340': 'R$255,00',
  'J350': 'R$260,00',
  'J360': 'R$265,00',
  'J370': 'R$270,00',
  'J380': 'R$275,00',
  'J390': 'R$280,00',
  'J400': 'R$285,00',
  'J410': 'R$290,00',
  'J420': 'R$295,00',
  'J430': 'R$300,00',
  'J440': 'R$305,00',
  'J450': 'R$310,00',
  'J460': 'R$315,00',
  'J470': 'R$320,00',
  'J480': 'R$325,00',
  'J490': 'R$330,00',
  'J500': 'R$335,00',
  'J510': 'R$340,00',
  'J520': 'R$345,00',
  'J530': 'R$350,00',
  'J540': 'R$355,00',
  'J550': 'R$360,00',
  'J560': 'R$365,00',
  'J570': 'R$370,00',
  'J580': 'R$375,00',
  'J590': 'R$380,00',
  'J600': 'R$385,00',
  'J610': 'R$390,00',
  'J620': 'R$395,00',
  'J630': 'R$400,00',
  'J640': 'R$405,00',
  'J650': 'R$410,00',
  'J660': 'R$415,00',
  'J670': 'R$420,00',
  'J680': 'R$425,00',
  'J690': 'R$430,00',
  'J700': 'R$435,00',
  'J710': 'R$440,00',
  'J720': 'R$445,00',
  'J730': 'R$450,00',
  'J740': 'R$455,00',
  'J750': 'R$460,00',
  'J760': 'R$465,00',
  'J770': 'R$470,00',
  'J780': 'R$475,00',
  'J790': 'R$480,00',
  'J800': 'R$485,00',
  'J810': 'R$490,00',
  'J820': 'R$495,00',
  'J830': 'R$500,00',
  'J840': 'R$505,00',
  'J850': 'R$510,00',
  'J860': 'R$515,00',
  'J870': 'R$520,00',
  'J880': 'R$525,00',
  'J890': 'R$530,00',
  'J900': 'R$535,00',
  'J910': 'R$540,00',
  'J920': 'R$545,00',
  'J930': 'R$550,00',
  'J940': 'R$555,00',
  'J950': 'R$560,00',
  'J960': 'R$565,00',
  'J970': 'R$570,00',
  'J980': 'R$575,00',
  'J990': 'R$580,00',
  'J1000': 'R$585,00'
};

const modelosMotorola = {
  'E6': 'R$65,00',
  'E6i': 'R$70,00',
  'E6s': 'R$70,00',
  'E7': 'R$75,00',
  'E7 Plus': 'R$80,00',
  'E7 Power': 'R$75,00',
  'E13': 'R$70,00',
  'E20': 'R$70,00',
  'E22': 'R$75,00',
  'E22i': 'R$70,00',
  'E30': 'R$75,00',
  'E32': 'R$80,00',
  'E40': 'R$80,00',
  'E50': 'R$85,00',
  'G5': 'R$70,00',
  'G5 Plus': 'R$75,00',
  'G5S': 'R$75,00',
  'G5S Plus': 'R$80,00',
  'G6': 'R$80,00',
  'G6 Plus': 'R$85,00',
  'G6 Play': 'R$75,00',
  'G7': 'R$85,00',
  'G7 Plus': 'R$90,00',
  'G7 Play': 'R$80,00',
  'G7 Power': 'R$85,00',
  'G8': 'R$90,00',
  'G8 Plus': 'R$95,00',
  'G8 Play': 'R$85,00',
  'G8 Power': 'R$90,00',
  'G9': 'R$95,00',
  'G9 Plus': 'R$100,00',
  'G9 Play': 'R$90,00',
  'G9 Power': 'R$95,00',
  'G10': 'R$100,00',
  'G10 Power': 'R$105,00',
  'G20': 'R$105,00',
  'G22': 'R$75,00',
  'G30': 'R$110,00',
  'G31': 'R$115,00',
  'G32': 'R$120,00',
  'G41': 'R$125,00',
  'G42': 'R$130,00',
  'G50': 'R$135,00',
  'G51': 'R$140,00',
  'G52': 'R$145,00',
  'G53': 'R$75,00',
  'G60': 'R$80,00',
  'G71': 'R$150,00',
  'G72': 'R$155,00',
  'G73': 'R$160,00',
  'G82': 'R$165,00',
  'G84': 'R$170,00',
  'G100': 'R$175,00',
  'G200': 'R$180,00',
  'Moto C': 'R$50,00',
  'Moto C Plus': 'R$55,00',
  'Moto E': 'R$60,00',
  'Moto E2': 'R$65,00',
  'Moto E3': 'R$70,00',
  'Moto E4': 'R$75,00',
  'Moto E4 Plus': 'R$80,00',
  'Moto E5': 'R$80,00',
  'Moto E5 Plus': 'R$85,00',
  'Moto E5 Play': 'R$75,00',
  'Moto E6': 'R$85,00',
  'Moto E6 Plus': 'R$90,00',
  'Moto E6 Play': 'R$80,00',
  'Moto E6i': 'R$85,00',
  'Moto E6s': 'R$85,00',
  'Moto E7': 'R$90,00',
  'Moto E7 Plus': 'R$95,00',
  'Moto E7 Power': 'R$90,00',
  'Moto E13': 'R$85,00',
  'Moto E20': 'R$85,00',
  'Moto E22': 'R$90,00',
  'Moto E22i': 'R$85,00',
  'Moto E30': 'R$90,00',
  'Moto E32': 'R$95,00',
  'Moto E40': 'R$95,00',
  'Moto E50': 'R$100,00',
  'Moto G': 'R$70,00',
  'Moto G2': 'R$75,00',
  'Moto G3': 'R$80,00',
  'Moto G4': 'R$85,00',
  'Moto G4 Plus': 'R$90,00',
  'Moto G4 Play': 'R$80,00',
  'Moto G5': 'R$85,00',
  'Moto G5 Plus': 'R$90,00',
  'Moto G5S': 'R$90,00',
  'Moto G5S Plus': 'R$95,00',
  'Moto G6': 'R$95,00',
  'Moto G6 Plus': 'R$100,00',
  'Moto G6 Play': 'R$90,00',
  'Moto G7': 'R$100,00',
  'Moto G7 Plus': 'R$105,00',
  'Moto G7 Play': 'R$95,00',
  'Moto G7 Power': 'R$100,00',
  'Moto G8': 'R$105,00',
  'Moto G8 Plus': 'R$110,00',
  'Moto G8 Play': 'R$100,00',
  'Moto G8 Power': 'R$105,00',
  'Moto G9': 'R$110,00',
  'Moto G9 Plus': 'R$115,00',
  'Moto G9 Play': 'R$105,00',
  'Moto G9 Power': 'R$110,00',
  'Moto G10': 'R$115,00',
  'Moto G10 Power': 'R$120,00',
  'Moto G20': 'R$120,00',
  'Moto G22': 'R$80,00',
  'Moto G30': 'R$125,00',
  'Moto G31': 'R$130,00',
  'Moto G32': 'R$135,00',
  'Moto G41': 'R$140,00',
  'Moto G42': 'R$145,00',
  'Moto G50': 'R$150,00',
  'Moto G51': 'R$155,00',
  'Moto G52': 'R$160,00',
  'Moto G53': 'R$80,00',
  'Moto G60': 'R$85,00',
  'Moto G71': 'R$165,00',
  'Moto G72': 'R$170,00',
  'Moto G73': 'R$175,00',
  'Moto G82': 'R$180,00',
  'Moto G84': 'R$185,00',
  'Moto G100': 'R$190,00',
  'Moto G200': 'R$195,00',
  'Moto X': 'R$110,00',
  'Moto X2': 'R$115,00',
  'Moto X3': 'R$120,00',
  'Moto X4': 'R$125,00',
  'Moto Z': 'R$130,00',
  'Moto Z2': 'R$135,00',
  'Moto Z3': 'R$140,00',
  'Moto Z4': 'R$145,00',
  'Moto Z5': 'R$150,00',
  'Moto Z6': 'R$155,00',
  'Moto Z7': 'R$160,00',
  'Moto Z8': 'R$165,00',
  'Moto Z9': 'R$170,00',
  'Moto Z10': 'R$175,00',
  'Moto Z11': 'R$180,00',
  'Moto Z12': 'R$185,00',
  'Moto Z13': 'R$190,00',
  'Moto Z14': 'R$195,00',
  'Moto Z15': 'R$200,00',
  'Moto Z16': 'R$205,00',
  'Moto Z17': 'R$210,00',
  'Moto Z18': 'R$215,00',
  'Moto Z19': 'R$220,00',
  'Moto Z20': 'R$225,00',
  'Moto Z21': 'R$230,00',
  'Moto Z22': 'R$235,00',
  'Moto Z23': 'R$240,00',
  'Moto Z24': 'R$245,00',
  'Moto Z25': 'R$250,00',
  'Moto Z26': 'R$255,00',
  'Moto Z27': 'R$260,00',
  'Moto Z28': 'R$265,00',
  'Moto Z29': 'R$270,00',
  'Moto Z30': 'R$275,00',
  'Moto Z31': 'R$280,00',
  'Moto Z32': 'R$285,00',
  'Moto Z33': 'R$290,00',
  'Moto Z34': 'R$295,00',
  'Moto Z35': 'R$300,00',
  'Moto Z36': 'R$305,00',
  'Moto Z37': 'R$310,00',
  'Moto Z38': 'R$315,00',
  'Moto Z39': 'R$320,00',
  'Moto Z40': 'R$325,00',
  'Moto Z41': 'R$330,00',
  'Moto Z42': 'R$335,00',
  'Moto Z43': 'R$340,00',
  'Moto Z44': 'R$345,00',
  'Moto Z45': 'R$350,00',
  'Moto Z46': 'R$355,00',
  'Moto Z47': 'R$360,00',
  'Moto Z48': 'R$365,00',
  'Moto Z49': 'R$370,00',
  'Moto Z50': 'R$375,00',
  'Moto Z51': 'R$380,00',
  'Moto Z52': 'R$385,00',
  'Moto Z53': 'R$390,00',
  'Moto Z54': 'R$395,00',
  'Moto Z55': 'R$400,00',
  'Moto Z56': 'R$405,00',
  'Moto Z57': 'R$410,00',
  'Moto Z58': 'R$415,00',
  'Moto Z59': 'R$420,00',
  'Moto Z60': 'R$425,00',
  'Moto Z61': 'R$430,00',
  'Moto Z62': 'R$435,00',
  'Moto Z63': 'R$440,00',
  'Moto Z64': 'R$445,00',
  'Moto Z65': 'R$450,00',
  'Moto Z66': 'R$455,00',
  'Moto Z67': 'R$460,00',
  'Moto Z68': 'R$465,00',
  'Moto Z69': 'R$470,00',
  'Moto Z70': 'R$475,00',
  'Moto Z71': 'R$480,00',
  'Moto Z72': 'R$485,00',
  'Moto Z73': 'R$490,00',
  'Moto Z74': 'R$495,00',
  'Moto Z75': 'R$500,00',
  'Moto Z76': 'R$505,00',
  'Moto Z77': 'R$510,00',
  'Moto Z78': 'R$515,00',
  'Moto Z79': 'R$520,00',
  'Moto Z80': 'R$525,00',
  'Moto Z81': 'R$530,00',
  'Moto Z82': 'R$535,00',
  'Moto Z83': 'R$540,00',
  'Moto Z84': 'R$545,00',
  'Moto Z85': 'R$550,00',
  'Moto Z86': 'R$555,00',
  'Moto Z87': 'R$560,00',
  'Moto Z88': 'R$565,00',
  'Moto Z89': 'R$570,00',
  'Moto Z90': 'R$575,00',
  'Moto Z91': 'R$580,00',
  'Moto Z92': 'R$585,00',
  'Moto Z93': 'R$590,00',
  'Moto Z94': 'R$595,00',
  'Moto Z95': 'R$600,00',
  'Moto Z96': 'R$605,00',
  'Moto Z97': 'R$610,00',
  'Moto Z98': 'R$615,00',
  'Moto Z99': 'R$620,00',
  'Moto Z100': 'R$625,00'
};

const marcaSelect = document.getElementById('marcaSelect');
const modeloSelect = document.getElementById('modeloSelect');
const resposta = document.getElementById('resposta');
const formulario = document.getElementById('formularioPedido');

function atualizarModelos() {
  const marca = marcaSelect.value;
  let modelos = marca === 'Samsung' ? modelosSamsung : modelosMotorola;
  
  modeloSelect.innerHTML = '<option value="">Selecione o modelo</option>';
  for (const modelo in modelos) {
    const option = document.createElement('option');
    option.value = modelo;
    option.textContent = modelo + ' - ' + modelos[modelo];
    modeloSelect.appendChild(option);
  }
}

marcaSelect.addEventListener('change', atualizarModelos);
document.addEventListener('DOMContentLoaded', atualizarModelos);

document.getElementById('formularioPedido').addEventListener('submit', function(e) {
  e.preventDefault();
  resposta.innerHTML = '<p>✅ Pedido enviado com sucesso! Entraremos em contato pelo WhatsApp.</p>';
  this.reset();
  atualizarModelos();
});

// Inicialização
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar AOS
    AOS.init({
        duration: 1000,
        easing: 'ease-in-out',
        once: true,
        mirror: false
    });

    // Inicializar funcionalidades
    inicializarNavegacao();
    inicializarFAQ();
    if (formulario) {
        inicializarFormulario();
    }
    inicializarScrollEffects();
    
    // Atualizar modelos iniciais
    atualizarModelos();
});

// Navegação suave
function inicializarNavegacao() {
    const navLinks = document.querySelectorAll('.nav-link');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetSection = document.querySelector(targetId);
            
            if (targetSection) {
                targetSection.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Menu mobile
    const navToggle = document.querySelector('.nav-toggle');
    const navMenu = document.querySelector('.nav-menu');
    
    if (navToggle) {
        navToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
            this.classList.toggle('active');
        });
    }
}

// FAQ Interativo
function inicializarFAQ() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        
        question.addEventListener('click', function() {
            const isActive = item.classList.contains('active');
            
            // Fechar todos os outros itens
            faqItems.forEach(otherItem => {
                otherItem.classList.remove('active');
            });
            
            // Abrir o item clicado se não estava ativo
            if (!isActive) {
                item.classList.add('active');
            }
        });
    });
}

// Efeitos de scroll
function inicializarScrollEffects() {
    const navbar = document.querySelector('.navbar');
    
    window.addEventListener('scroll', function() {
        if (window.scrollY > 100) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });
}

// Formulário avançado
function inicializarFormulario() {
    const inputs = formulario.querySelectorAll('input, select');
    
    // Validação em tempo real
    inputs.forEach(input => {
        input.addEventListener('blur', validarCampo);
        input.addEventListener('input', limparErro);
    });
    
    // Envio do formulário
    formulario.addEventListener('submit', enviarFormulario);
}

function validarCampo(e) {
    const campo = e.target;
    const valor = campo.value.trim();
    const validationDiv = campo.parentNode.querySelector('.form-validation');
    
    // Limpar validação anterior
    if (validationDiv) {
        validationDiv.innerHTML = '';
        campo.classList.remove('error', 'success');
    }
    
    // Validações específicas
    let isValid = true;
    let message = '';
    
    if (campo.hasAttribute('required') && !valor) {
        isValid = false;
        message = 'Este campo é obrigatório';
    } else if (campo.type === 'tel' && valor) {
        const phoneRegex = /^\(\d{2}\) \d{5}-\d{4}$/;
        if (!phoneRegex.test(valor)) {
            isValid = false;
            message = 'Formato: (11) 99999-9999';
        }
    } else if (campo.id === 'imei_sn' && valor) {
        if (valor.length < 10) {
            isValid = false;
            message = 'IMEI/SN deve ter pelo menos 10 dígitos';
        }
    }
    
    // Aplicar validação
    if (!isValid) {
        campo.classList.add('error');
        if (validationDiv) {
            validationDiv.innerHTML = `<span class="error-message">${message}</span>`;
        }
    } else if (valor) {
        campo.classList.add('success');
    }
    
    return isValid;
}

function limparErro(e) {
    const campo = e.target;
    const validationDiv = campo.parentNode.querySelector('.form-validation');
    
    campo.classList.remove('error');
    if (validationDiv) {
        validationDiv.innerHTML = '';
    }
}

async function enviarFormulario(e) {
    e.preventDefault();
    
    // Validar todos os campos
    const inputs = formulario.querySelectorAll('input, select');
    let isValid = true;
    
    inputs.forEach(input => {
        if (!validarCampo({ target: input })) {
            isValid = false;
        }
    });
    
    if (!isValid) {
        mostrarResposta('Por favor, corrija os erros no formulário.', 'error');
        return;
    }
    
    // Coletar dados do formulário
    const formData = new FormData(formulario);
    const dados = {
        nome: formData.get('nome'),
        whatsapp: formData.get('whatsapp'),
        marca: formData.get('marca'),
        modelo: formData.get('modelo'),
        tipo_bloqueio: formData.get('tipo_bloqueio'),
        imei_sn: formData.get('imei_sn')
    };
    
    // Montar mensagem para WhatsApp
    const mensagem =
        `*Novo Pedido de Desbloqueio*%0A` +
        `Nome: ${encodeURIComponent(dados.nome)}%0A` +
        `WhatsApp: ${encodeURIComponent(dados.whatsapp)}%0A` +
        `Marca: ${encodeURIComponent(dados.marca)}%0A` +
        `Modelo: ${encodeURIComponent(dados.modelo)}%0A` +
        `Tipo de Bloqueio: ${encodeURIComponent(dados.tipo_bloqueio)}%0A` +
        `IMEI/SN: ${encodeURIComponent(dados.imei_sn)}`;
    
    // Abrir WhatsApp com mensagem pronta
    const url = `https://wa.me/5541996378029?text=${mensagem}`;
    window.open(url, '_blank');
    formulario.reset();
    atualizarModelos();
}

function mostrarResposta(mensagem, tipo) {
    if (!resposta) return;
    resposta.innerHTML = `<p class="${tipo}">${mensagem}</p>`;
    resposta.scrollIntoView({ behavior: 'smooth', block: 'center' });
    // Auto-remover após 5 segundos
    setTimeout(() => {
        resposta.innerHTML = '';
    }, 5000);
}

// Animações adicionais
function adicionarEfeitosVisuais() {
    // Contador animado
    const stats = document.querySelectorAll('.stat-number');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const target = entry.target;
                const finalValue = target.textContent;
                const isPercentage = finalValue.includes('%');
                const isTime = finalValue.includes('h');
                
                if (isPercentage) {
                    animarContador(target, 0, parseInt(finalValue), '%');
                } else if (isTime) {
                    target.textContent = finalValue;
                } else {
                    animarContador(target, 0, parseInt(finalValue), '+');
                }
                
                observer.unobserve(target);
            }
        });
    });
    
    stats.forEach(stat => observer.observe(stat));
}

function animarContador(elemento, inicio, fim, sufixo) {
    const duracao = 2000;
    const incremento = (fim - inicio) / (duracao / 16);
    let valorAtual = inicio;
    
    const timer = setInterval(() => {
        valorAtual += incremento;
        if (valorAtual >= fim) {
            valorAtual = fim;
            clearInterval(timer);
        }
        elemento.textContent = Math.floor(valorAtual) + sufixo;
    }, 16);
}

// Inicializar efeitos visuais quando a página carregar
window.addEventListener('load', adicionarEfeitosVisuais);

// Cotação do dólar em tempo real
async function atualizarDolar() {
    try {
        const res = await fetch('https://economia.awesomeapi.com.br/json/last/USD-BRL');
        const data = await res.json();
        const valor = parseFloat(data.USDBRL.bid).toFixed(2).replace('.', ',');
        document.getElementById('dolarValue').textContent = `R$ ${valor}`;
    } catch (e) {
        document.getElementById('dolarValue').textContent = 'R$ --,--';
    }
}

atualizarDolar();
setInterval(atualizarDolar, 1000); // Atualiza a cada 1 segundo

// Mapeamento de valores das ferramentas para aluguel
const valoresFerramentas = {
    'Octoplus Box': '30.00',
    'Chimera Tool': '35.00',
    'Z3X Box': '25.00',
    'Sigma Key': '30.00',
    'EFT Pro Dongle': '28.00',
    'Pandora Box': '32.00',
    'Hydra Tool': '30.00',
    'UnlockTool': '25.00',
    'MRT Dongle': '28.00',
    'UMT Dongle': '28.00',
    'Medusa Pro Box': '32.00',
    'Infinity-Box': '28.00',
    'GCPro Key': '27.00',
    'NCK Pro Box': '29.00',
    'TFM Tool Pro': '30.00',
    'EFT Dongle': '27.00',
    'Sigma Plus': '31.00',
    'FuriousGold': '33.00',
    'BST Dongle': '26.00'
};

// Elementos do formulário de aluguel
const ferramentaAluguel = document.getElementById('ferramenta_aluguel');
const valorAluguel = document.getElementById('valor_aluguel');
const btnGerarPix = document.getElementById('btnGerarPix');
const btnEnviarAluguel = document.getElementById('btnEnviarAluguel');
const pixQrArea = document.getElementById('pixQrArea');
const formularioAluguel = document.getElementById('formularioAluguel');

// Atualiza valor conforme ferramenta
if (ferramentaAluguel && valorAluguel) {
    ferramentaAluguel.addEventListener('change', function() {
        const valor = valoresFerramentas[this.value] || '';
        valorAluguel.value = valor ? `R$ ${valor.replace('.', ',')}` : '';
    });
}

// Gera QR Code PIX ao clicar
if (btnGerarPix) {
    btnGerarPix.addEventListener('click', function() {
        const valor = valoresFerramentas[ferramentaAluguel.value];
        if (!valor) {
            pixQrArea.innerHTML = '<span style="color:red">Selecione a ferramenta para gerar o valor do PIX.</span>';
            return;
        }
        // Monta payload PIX (copia e cola)
        const chave = 'suporteserversmart@gmail.com';
        const recebedor = 'Denis alves de souza';
        const cidade = 'Curitiba';
        const txid = 'ALUGUEL' + Date.now();
        const valorPix = valor;
        // Usar API externa para gerar QR Code (exemplo: qrcode.show)
        // Monta o payload básico (não é EMV completo, mas serve para QR simples)
        const payload = `00020126360014BR.GOV.BCB.PIX0118${chave}0215${recebedor}5204000053039865405${valorPix}5802BR5915${recebedor}6010${cidade}62070503${txid}6304`;
        const urlQr = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=00020126360014BR.GOV.BCB.PIX0118${chave}5204000053039865405${valorPix}5802BR5915${recebedor}6010${cidade}62070503${txid}6304`;
        pixQrArea.innerHTML = `<div style='margin-bottom:8px;'><img src='${urlQr}' alt='QR Code PIX'></div><div style='font-size:0.95em;word-break:break-all;'>Chave PIX: <b>${chave}</b><br>Valor: <b>R$ ${valorPix.replace('.', ',')}</b></div>`;
    });
}

// Envia pedido para WhatsApp
if (btnEnviarAluguel) {
    btnEnviarAluguel.addEventListener('click', function() {
        const nome = document.getElementById('nome_aluguel').value;
        const whatsapp = document.getElementById('whatsapp_aluguel').value;
        const ferramenta = ferramentaAluguel.value;
        const tipoBloqueio = document.getElementById('tipo_bloqueio_aluguel').value;
        const anydesk = document.getElementById('anydesk_aluguel').value;
        const valor = valoresFerramentas[ferramenta] || '';
        if (!nome || !whatsapp || !ferramenta || !tipoBloqueio || !anydesk || !valor) {
            pixQrArea.innerHTML = '<span style="color:red">Preencha todos os campos antes de enviar o pedido.</span>';
            return;
        }
        const mensagem =
            `*Novo Pedido de Aluguel de Ferramenta*%0A` +
            `Nome: ${encodeURIComponent(nome)}%0A` +
            `WhatsApp: ${encodeURIComponent(whatsapp)}%0A` +
            `Ferramenta: ${encodeURIComponent(ferramenta)}%0A` +
            `Tipo de Bloqueio: ${encodeURIComponent(tipoBloqueio)}%0A` +
            `ID AnyDesk: ${encodeURIComponent(anydesk)}%0A` +
            `Valor: R$ ${valor.replace('.', ',')}`;
        const url = `https://wa.me/5541996378029?text=${mensagem}`;
        window.open(url, '_blank');
        formularioAluguel.reset();
        pixQrArea.innerHTML = '';
    });
} 